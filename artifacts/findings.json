{
  "correctness": [
    {
      "title": "TypeScript compilation fails",
      "impact": "Blocks builds and indicates runtime bugs in planner, account screen, chat hook, and native intent bridge.",
      "evidence": [
        "src/agent/planner.ts: Property 'offline' does not exist on type 'Error'.",
        "src/components/Account.tsx: Passing custom props (label/title) to React Native TextInput/Button causing type errors and implicit any handlers.",
        "src/hooks/useChatState.ts: Block-scoped variable 'toolExecution' used before declaration (TS2448/TS2454).",
        "src/native/intent.ts: Accessing res.confidence although predict() returns only { label, top3 } (TS2339)."
      ],
      "command": "npx tsc --noEmit"
    }
  ],
  "security": [
    {
      "title": "Production credentials committed to .env",
      "impact": "Supabase URL/anon key and OpenAI project key are exposed in repo, violating secret management policy and enabling abuse if truly live.",
      "file": ".env:1-10"
    }
  ],
  "performance": [
    {
      "title": "Menu preload pulls up to 3000 records per refresh",
      "impact": "useMenuState loads 1000 entries per type synchronously (three concurrent listJournals calls) which may strain mobile network and Supabase quotas as data grows.",
      "file": "src/hooks/useMenuState.ts:45"
    }
  ],
  "maintainability": [
    {
      "title": "App.tsx monolith (~1.8k LOC)",
      "impact": "High cyclomatic complexity, mixed concerns (auth, onboarding, chat UI, telemetry) making future changes risky without modularization.",
      "file": "App.tsx"
    },
    {
      "title": "Duplicated Supabase policy setup",
      "impact": "Migrations `20250106000000_create_tables.sql` and `20250106000002_fix_policies.sql` recreate same policies; prone to drift/confusion during future schema evolutions.",
      "file": "supabase/migrations"
    }
  ],
  "a11y": [],
  "i18n": [],
  "DX": [
    {
      "title": "No automated test command",
      "impact": "`npm test` missing; existing test file relies on console asserts only, preventing CI gating.",
      "command": "npm test"
    },
    {
      "title": "Security audit blocked by offline environment",
      "impact": "`npm audit --json` cannot run without network and no offline DB provided; supply-chain vulnerabilities currently unknown.",
      "command": "npm audit --json",
      "note": "Needs cached advisory DB or alternative scanning strategy."
    }
  ]
}
